# Sight AI 统一应用

一个集成的管理界面，将后台服务和 CLI 工具整合到一个统一的交互式应用中，提供一站式的 Sight AI 矿工节点管理解决方案。

## 📚 文档导航

- **[完整文档](./UNIFIED_APP_DOCUMENTATION.md)** - 详细的功能说明和架构介绍
- **[使用示例](./USAGE_EXAMPLES.md)** - 实际使用场景和最佳实践
- **[快速参考](./QUICK_REFERENCE.md)** - 命令速查表和故障排除

## 🚀 核心特性

### 🎛️ 统一管理界面
- 集成后台服务和 CLI 工具
- 直观的交互式菜单
- 实时状态显示
- 智能功能依赖检查

### 🔧 后台服务管理
- 一键启动/停止后台服务
- 实时启动进度显示
- 自动健康检查
- 优雅的服务生命周期管理

### 📊 性能监控系统
- 实时系统资源监控
- 历史性能数据分析
- 智能健康评分
- 可视化性能指标

### ⚙️ 个性化配置
- 多主题支持（默认/简约/彩色）
- 自定义快捷键
- 个性化设置保存
- 配置热更新

## 🛠️ 安装和使用

### 前提条件
- Node.js 20+
- 已构建的 CLI 工具
- 已配置的项目环境

### 快速开始

```bash
# 构建应用
cd backend/packages/apps/unified-app
npm install
npm run build

# 启动应用
node dist/main.js

# 或使用全局命令（如已安装）
sight-ai
```

### 基本命令

```bash
# 交互式管理界面（默认）
sight-ai
sight-ai interactive

# 直接启动后台服务
sight-ai backend

# 直接运行 CLI 命令
sight-ai cli [command]
```

## 🎯 主要功能

### 后台服务管理
- **🚀 启动服务**: 智能启动 NestJS 后台服务
- **🛑 停止服务**: 优雅停止服务进程
- **🔧 状态检查**: 详细的服务状态报告
- **📈 性能监控**: 实时资源使用监控

### CLI 工具集成
- **🔗 网关注册**: 设备注册到网关
- **🤖 模型管理**: AI 模型上报和管理
- **📊 状态监控**: 系统和矿工状态查看
- **📋 日志管理**: 日志查看和分析

### 系统监控
- **💻 资源监控**: CPU、内存、磁盘使用率
- **🌐 网络状态**: 服务端口和连接状态
- **📁 文件检查**: 关键文件和目录状态
- **⚙️ 进程管理**: 进程状态和生命周期

## 📋 使用流程

### 首次使用
1. 启动统一应用
2. 启动后台服务
3. 检查系统状态
4. 进行设备注册
5. 管理 AI 模型

### 日常维护
1. 检查性能监控
2. 查看系统日志
3. 监控服务状态
4. 更新配置设置

## ⚙️ 配置选项

### 主题设置
- **默认主题**: 蓝色系，清晰的视觉层次
- **简约主题**: 黑白配色，极简设计
- **彩色主题**: 多彩配色，丰富的视觉效果

### 功能设置
- **自动启动后台**: 应用启动时自动启动后台服务
- **详细日志**: 显示更详细的操作日志
- **检查更新**: 自动检查应用更新
- **快捷键**: 自定义快捷键映射

## 📊 性能监控

### 监控指标
- **内存使用**: 实时内存占用和使用率
- **CPU 使用**: 处理器使用率和核心数
- **响应时间**: API 服务响应延迟
- **运行时间**: 应用和服务运行时长

### 健康评分
基于多个因素的综合健康评分：
- 内存使用率（30%权重）
- CPU 使用率（30%权重）
- 服务状态（40%权重）
- 响应时间（额外影响）

## 🔧 故障排除

### 常见问题

**后台服务启动失败**
```bash
# 检查端口占用
netstat -an | grep 8716

# 检查项目结构
ls -la nx.json

# 手动启动测试
npx nx serve api-server
```

**CLI 工具未找到**
```bash
# 检查编译状态
ls -la packages/apps/cli-tool/dist/main.js

# 重新编译
cd packages/apps/cli-tool && npm run build
```

**配置文件问题**
```bash
# 重置配置
rm ~/.sightai/unified-app-config.json

# 重启应用
sight-ai
```

更多故障排除方案请参考 [快速参考](./QUICK_REFERENCE.md#快速故障排除)。

## 📁 文件结构

```
~/.sightai/                          # 用户配置目录
├── unified-app-config.json          # 统一应用配置
├── config.json                      # CLI 工具配置
└── logs/
    └── system-YYYY-MM-DD.log        # 系统日志

src/                                 # 源代码目录
├── main.ts                          # 主入口文件
└── utils/
    ├── config.ts                    # 配置管理
    ├── theme.ts                     # 主题系统
    └── performance.ts               # 性能监控
```

## 🎨 界面预览

### 主菜单界面
```
📊 系统状态:
后台服务: 🟢 运行中 (端口 8716)
数据库: 🟢 LevelDB 已连接
内存使用: 156.2 MB / 16.0 GB (1%)
运行时间: 5m 23s

? 选择操作：
❯ 🛑 停止后台服务
  🔗 网关注册管理
  🤖 模型上报管理
  📊 运行状态监控
  🎛️ CLI 交互模式
  🔧 检查服务状态
  ⚙️ 应用设置
  📈 性能监控
  📋 查看日志
  🚪 退出
```

### 性能监控界面
```
📈 性能监控

📊 当前性能:
  内存使用: 156.2 MB / 16.0 GB
  内存百分比: [██░░░░░░░░░░░░░░░░░░] 1%
  CPU 使用率: [███░░░░░░░░░░░░░░░░░] 15%
  运行时间: 15m 42s
  后台服务: 🟢 running

💚 系统健康:
  健康评分: [████████████████████] 95%
  健康状态: 🟢 EXCELLENT
```

## 🔗 相关项目

- [CLI 工具](../cli-tool/) - 命令行交互工具
- [API 服务器](../api-server/) - 后台 API 服务
- [核心库](../../libs/) - 共享功能库

## 📄 许可证

MIT License

## 🤝 贡献

欢迎提交 Issue 和 Pull Request 来改进这个项目。

## 📞 支持

如果您遇到问题或需要帮助，请：

1. 查看 [完整文档](./UNIFIED_APP_DOCUMENTATION.md)
2. 参考 [使用示例](./USAGE_EXAMPLES.md)
3. 查阅 [快速参考](./QUICK_REFERENCE.md)
4. 提交 Issue 描述问题

---

**Sight AI 统一应用** - 让 AI 矿工管理变得简单高效！
