# Sight AI 统一应用使用示例

## 快速开始指南

### 第一次使用

1. **构建和启动应用**
```bash
cd backend/packages/apps/unified-app
npm run build
node dist/main.js
```

2. **首次启动界面**
```
╔═══════════════════════════════════════════════════════════╗
║                  Sight AI 统一应用                        ║
║                        v1.0.0                            ║
╚═══════════════════════════════════════════════════════════╝

📊 系统状态:
后台服务: 🔴 已停止
💡 提示: 启动后台服务以使用完整功能

⌨️  快捷提示: 使用 ↑↓ 键选择，Enter 确认，Ctrl+C 退出

? 选择操作： (Use arrow keys)
❯ 🚀 启动后台服务
  🔗 网关注册管理 (需要先启动后台服务)
  🤖 模型上报管理 (需要先启动后台服务)
  📊 运行状态监控 (需要先启动后台服务)
  🎛️ CLI 交互模式 (需要先启动后台服务)
  🔧 检查服务状态
  ⚙️ 应用设置
  📈 性能监控
  📋 查看日志
  🚪 退出
```

## 详细使用示例

### 后台服务管理

#### 场景1：启动后台服务
```bash
$ sight-ai

? 选择操作： 🚀 启动后台服务

⠋ 正在启动后台服务...
⠋ 正在启动 NestJS 服务器...
⠋ 正在初始化 Nest 应用...
⠋ 数据库连接成功...
⠋ 正在连接网关...
⠋ 应用启动成功...
⠋ 等待服务完全就绪...
✅ 后台服务启动成功！

✅ 后台服务已启动，现在可以使用其他功能了！

按任意键继续...
```

#### 场景2：服务运行中的主界面
```
📊 系统状态:
后台服务: 🟢 运行中 (端口 8716)
数据库: 🟢 LevelDB 已连接
存储位置: ~/.sightai/saito
内存使用: 156.2 MB / 16.0 GB (1%)
运行时间: 5m 23s
💡 提示: 所有功能已可用

? 选择操作： (Use arrow keys)
❯ 🛑 停止后台服务
  🔗 网关注册管理
  🤖 模型上报管理
  📊 运行状态监控
  🎛️ CLI 交互模式
  🔧 检查服务状态
  ⚙️ 应用设置
  📈 性能监控
  📋 查看日志
  🚪 退出
```

#### 场景3：停止后台服务
```bash
? 选择操作： 🛑 停止后台服务

🛑 正在停止后台服务...
✅ 后台服务已正常停止

✅ 后台服务已成功停止！

按任意键继续...
```

### CLI 工具集成使用

#### 场景1：网关注册管理
```bash
? 选择操作： 🔗 网关注册管理

🔗 启动网关注册管理...
提示: 完成操作后将自动返回主菜单

🚀 启动 CLI 工具 (register)...

[CLI 工具界面]
🔗 网关注册管理
═══════════════

ℹ 未找到注册信息，开始新的注册流程
...

✅ CLI 操作完成
⏳ 正在返回主菜单...

[自动返回主菜单]
```

#### 场景2：模型管理
```bash
? 选择操作： 🤖 模型上报管理

🤖 启动模型管理...
提示: 完成操作后将自动返回主菜单

🚀 启动 CLI 工具 (model)...

[CLI 工具界面]
🤖 模型上报管理
═══════════════

? 选择操作： 📋 查看本地模型
...

✅ CLI 操作完成
⏳ 正在返回主菜单...
```

#### 场景3：CLI 交互模式
```bash
? 选择操作： 🎛️ CLI 交互模式

🎛️ 启动 CLI 交互模式...
提示: 完成操作后将自动返回主菜单

🚀 启动 CLI 工具 (交互模式)...

[完整的 CLI 交互界面]
╔═══════════════════════════════════════════════════════════╗
║                  Sight AI 交互式 CLI 工具                  ║
║                        v1.0.0                            ║
╚═══════════════════════════════════════════════════════════╝

? 选择操作：
❯ 🔗 网关注册管理
  🤖 模型上报管理
  📊 运行状态监控
  📋 查看日志
  🚪 退出
```

### 系统状态检查

#### 场景1：详细状态报告
```bash
? 选择操作： 🔧 检查服务状态

🔧 正在检查系统状态...
⠋ 检查后台服务状态...
✅ 后台服务运行正常

📋 详细状态报告:
══════════════════════════════════════════════════

🚀 后台服务:
  状态: ✅ 运行中
  端口: 8716
  健康检查: ✅ 正常

💾 数据库:
  类型: LevelDB
  位置: ~/.sightai/saito
  状态: ✅ 已连接

🌐 网络:
  API 端口: 8716
  Ollama 端口: 11434

📁 文件状态:
  CLI 工具: ✅ 已编译
  统一应用: ✅ 已编译
  项目根目录: /path/to/project

⚙️ 进程状态:
  统一应用 PID: 12345
  后台服务进程: ✅ 运行中

══════════════════════════════════════════════════

按任意键继续...
```

### 性能监控

#### 场景1：性能监控界面
```bash
? 选择操作： 📈 性能监控

📈 性能监控
══════════════════════════════════════════════════

📊 当前性能:
  内存使用: 156.2 MB / 16.0 GB
  内存百分比: [██░░░░░░░░░░░░░░░░░░] 1%
  CPU 使用率: [███░░░░░░░░░░░░░░░░░] 15%
  CPU 核心数: 8
  运行时间: 15m 42s
  后台服务: 🟢 running
  响应时间: 45ms

📈 5分钟平均:
  平均内存使用: [██░░░░░░░░░░░░░░░░░░] 2%
  平均CPU使用: [██░░░░░░░░░░░░░░░░░░] 12%
  平均响应时间: 52ms

💚 系统健康:
  健康评分: [████████████████████] 95%
  健康状态: 🟢 EXCELLENT

══════════════════════════════════════════════════

按任意键继续...
```

### 应用设置

#### 场景1：设置菜单
```bash
? 选择操作： ⚙️ 应用设置

⚙️ 应用设置
══════════════════════════════════════════════════

? 选择设置项： (Use arrow keys)
❯ 🎨 主题设置 (当前: default)
  🚀 自动启动后台 (当前: 关闭)
  📝 详细日志 (当前: 关闭)
  🔄 检查更新 (当前: 开启)
  🔧 重置所有设置
  🔙 返回主菜单
```

#### 场景2：主题切换
```bash
? 选择设置项： 🎨 主题设置 (当前: default)

? 选择主题： (Use arrow keys)
❯ 🔵 默认主题 (蓝色系)
  ⚪ 简约主题 (黑白)
  🌈 彩色主题 (多彩)

✅ 主题已切换为: colorful

按任意键继续...
```

### 命令行模式使用

#### 场景1：直接启动后台
```bash
$ sight-ai backend

🚀 直接启动模式
⠋ 正在启动后台服务...
⠋ 正在启动 NestJS 服务器...
✅ 后台服务启动成功！
✅ 后台服务运行中，按 Ctrl+C 停止

[服务持续运行，显示实时日志]
```

#### 场景2：直接运行 CLI 命令
```bash
$ sight-ai cli register

🚀 启动 CLI 工具 (register)...
提示: 完成操作后将自动返回主菜单

[CLI 注册界面]
🔗 网关注册管理
═══════════════
...

✅ CLI 操作完成
```

#### 场景3：CLI 交互模式
```bash
$ sight-ai cli

🚀 启动 CLI 工具 (交互模式)...
提示: 完成操作后将自动返回主菜单

[完整的 CLI 交互界面]
```

## 最佳实践

### 1. 日常使用流程

**推荐的启动顺序：**
```bash
# 1. 启动统一应用
sight-ai

# 2. 启动后台服务
选择 "🚀 启动后台服务"

# 3. 检查系统状态
选择 "🔧 检查服务状态"

# 4. 进行设备注册（首次使用）
选择 "🔗 网关注册管理"

# 5. 管理模型
选择 "🤖 模型上报管理"

# 6. 监控运行状态
选择 "📊 运行状态监控"
```

**日常维护检查：**
```bash
# 每日检查
1. 📈 性能监控 - 查看系统健康状态
2. 📋 查看日志 - 检查错误和警告
3. 🔧 检查服务状态 - 确认所有服务正常

# 每周维护
1. ⚙️ 应用设置 - 检查配置更新
2. 📋 查看日志 → 清理日志 - 清理旧日志文件
```

### 2. 性能优化建议

**系统资源管理：**
- 监控内存使用率，超过80%时考虑重启
- CPU使用率持续高于90%时检查后台任务
- 定期查看性能监控，关注趋势变化

**后台服务优化：**
- 避免频繁启停后台服务
- 使用直接启动模式进行长期运行
- 定期检查服务健康状态

### 3. 故障排除流程

**后台服务问题：**
```bash
1. 🔧 检查服务状态 - 查看详细状态报告
2. 📋 查看日志 - 搜索错误信息
3. 🛑 停止后台服务 → 🚀 启动后台服务 - 重启服务
4. 如果问题持续，使用 sight-ai backend 直接启动查看详细日志
```

**CLI 工具问题：**
```bash
1. 🔧 检查服务状态 - 确认 CLI 工具已编译
2. 重新构建 CLI 工具: cd packages/apps/cli-tool && npm run build
3. 使用 🎛️ CLI 交互模式 测试功能
```

**配置问题：**
```bash
1. ⚙️ 应用设置 → 🔧 重置所有设置
2. 手动删除配置文件: rm ~/.sightai/unified-app-config.json
3. 重启应用重新初始化配置
```

### 4. 安全注意事项

**配置文件安全：**
- 定期备份 `~/.sightai/` 目录
- 确保配置文件权限正确
- 不要在公共环境显示敏感信息

**服务安全：**
- 仅在可信网络环境运行
- 定期检查端口占用情况
- 监控异常的资源使用

### 5. 高级使用技巧

**快捷键使用：**
- 在主菜单中可以使用快捷键快速导航
- 自定义快捷键以提高效率
- 使用 Ctrl+C 随时退出到主菜单

**多实例管理：**
- 可以同时运行多个统一应用实例
- 每个实例独立管理后台服务
- 注意端口冲突问题

**自动化脚本：**
```bash
# 创建启动脚本
#!/bin/bash
cd /path/to/project/backend/packages/apps/unified-app
node dist/main.js

# 创建后台服务脚本
#!/bin/bash
sight-ai backend
```

### 6. 开发和调试

**开发模式：**
```bash
# 使用开发模式获取详细输出
npm run dev

# 监控日志文件
tail -f ~/.sightai/logs/system-$(date +%Y-%m-%d).log
```

**调试技巧：**
- 使用详细日志模式
- 检查进程状态和资源使用
- 使用性能监控识别瓶颈
- 查看系统日志定位问题
